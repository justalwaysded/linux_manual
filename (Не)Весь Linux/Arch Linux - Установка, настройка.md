Если вы выбрали арч в качестве первого линукс-дистрибутива, вы самоубийца. Но потенциальный.
В установке важно понимать за что отвечает та или иная команда, и часто вам придётся выходить из этой статьи и идти в ютуб, или на арч вики, а так же понимать английский. 
https://www.youtube.com/watch?v=O28sURKsUdA - Хороший гайд, который вмещает в себя простую установку арча и установку рядом с виндой на другом диске с загрузчиком rEFInd.
#### 1. Интернет
Стоит начать с интернета, как вы только загрузили archiso. Если у вас интернет подключён по витой паре, то можете пропустить этот шаг. Если у вас подклбчение через wi-fi, то интернет можно настроить утилитой iwctl:
Запускаете `iwctl`. Если пишет что ждёт запуска iwd, то запускаем сервис с помощью `systemctl start iwd`.
Теперь вы в утилите. Для начала надо найти имя вашей интернет-карты, например `wlan0`, благодаря комманде `station list`.  Статус показывает disconnected, ибо не подключён к сети. Сканируем сети `station wlan0 scan`, и после сканирования получаем имена сетей `station wlan0 get-networks`. Находим вашу сеть, и вписываем команду для подключения: `sation wlan0 connect "network_name"` где в кавычках - имя вашей сети. По необходимости вводим пароль. После подключения выходим командой `exit`, и проверяем с помощью `ping google.com`. Если отправка и получение пакетов стабильно, значит интернет настроен.

#### 2. Время и регион
Включаем синхронизацию через NTP с помощью утилиты `timedatectl`:
`timedatectl set-ntp true`. Теперь ставим временную зону. У меня это будет Европа, Киев. `timedatectl set-timezone Europe/Kyiv`, Для любого другого региона просто ищите, проверяем с `timedatectl status`.

#### 3. Разметка диска
Для разметки будем использовать утилиту `fdisk`. 
Разверните список ваших дисков с помощью `fdisk -l`, и выберите тот диск, на котором будете устанавливать систему. Например `/dev/sda`, у вас может отличаться. 
Заходим в утилиту и указываем наш накопитель `fdisk /dev/sda`.
Выбираем таблицу разделов, GPT или MBR. MBR поддерживает диски до 2 ТБ. Если больше, то выбирайте GPT. Для создания MBR вписываем команду `o`, а для создания GPT вписываем `g`.  Теперь создание  разделов. Вводим команду `n`, номер диска советую выбирать по умолчанию (нажимаете ввод/enter), а первый сектор раздела советую не трогать и тоже выбирать по умолчанию. 

Теперь выбираем размер раздела. Допустим у нас диск размером 500 ГБ. 
У нас есть 4 основных раздела: Корень (root, `/`), Домашняя директория (`/home`), Раздел подкачки, который использует место на накопителе если не хватает оперативной памяти, и раздел загрузчика. Вы так же можете не создавать раздел для домашней директории, но это эквивалетно тому, что бы не создавать диск D и держать всё на диске C в виндовс. Я буду создавать оба раздела для примера.  Если при создании раздела система предупреждает о наличии иной сигнатуры, убирайте её.

Пример схемы разметки:
- /dev/sda1 - Загрузчик, выделяем ему 550 МБ (`+550M` при выборе последнего сектора и выделению места)
- /dev/sda2 - Раздел подкачки, Выделяем ему 2 ГБ (`+2G`)
- /dev/sda3 - Коренной раздел, выделим ему 70-100 ГБ (`+70G` или любой другой размер) 
- /dev/sda4 - Домашний раздел. При создании последнего раздела просто нажимаем enter, и отдаём ему оставшееся место. 

Теперь надо поменять типы разделов с помощью `t`. Выбираем наш первый раздел загрузчика и вводим `1`, тем самым выбирая тип `EFI System`. Для второго раздела подкачки мы вводим `19` выбирая тип `Linux swap`. Для третьего и четвёртого, корневого и домашего разделов мы оставляем как есть, `Linux filesystem`, вводим команду `w` что бы записать все изменения и выйти. Проверяем с помощью `fdisk -l`.

#### 4. Форматирование и монтирование разделов. Создание основных директорий.
Советую пересмотреть понятия монтирования в [[4. Файловая система в Linux|статье про файловую систему]].
Для начала форматируем раздел загрузчика с помощью `mkfs.fat -F32 /dev/sda1`. Далее форматируем раздел подкачки `mkswap /dev/sda2` и включаем его `swapon /dev/sda2`. Форматируем оставшиеся разделы на обычную файловую систему: `mkfs.ext4 /dev/sda3`; `mkfs.ext4 /dev/sda4`.

Теперь монтируем разделы.
Примонтируем наш корневой раздел к `/mnt` - временной точке монтирования на флешке установщике `mount /dev/sda3 /mnt`. Создаём директории для монтирования загрузчика и монтирования домашней директории: `mkdir /mnt/efi`; `mkdir /mnt/home`.
Теперь монтируем раздел загрузчика и домашний раздел к директориям: `mount /dev/sda1 /mnt/efi`; `mount /dev/sda4 /mnt/home`

#### 5. Загрузка основных пакетов, ядра и прочего.
С помощью команды `pacstrap` мы установим пакеты ядра и прочие основные пакеты в наш корневой раздел: `pacstrap /mnt base linux linux-firmware`.

#### 6. Генерирование fstab.
`fstab` это файл, который рассказывает системе о точках монтирования. Генерируем его `genfstab -U /mnt >> /mnt/etc/fstab`. Перепроверьте файл `cat /mnt/etc/fstab`.

#### 7. arch-chroot и настройка даты, времени, региона и локализации. 
После генерации фстаба, мы можем работать уже с корня. Для этого прописываем `arch-chroot /mnt`.
Создаём ссылку для времени, в моём случае опять же Европа, Киев `ln -sf /usr/share/zoneinfo/Europe/Kyiv /etc/localtime`.
Ставим системное время `hwclock --systohc`
Теперь нам надо установить текстовый редактор. Для новичка будет проще `nano`, но можно и использовать `vim`. `pacman -S nano` или `pacman -S vim`. 
Заходим в файл локализаций `nano /etc/locale.gen` или `vim /etc/locale.gen` (В дальнейшем я буду писать nano, ибо просто не хочу повторяться).
Нужно найти две локализпции: Английская `en_US.UTF-8` и русскую `ru_RU.UTF-8`. Не стоит всё выискивать глазами, в nano что бы найти что-то, нажимаем сочетание клавиш `ctrl+F` и вписываем локализацию. В vim нажимаем знак черты `/` и вписываем нужную нам локализацию. 
Нужно убрать решётку, которая делает строку комментарием. В nano просто убираем её как в любом другом текстовом редакторе, а в vim надо войти в режим ввода нажав клавишу `i`, и убираем. Как раскомментировали нужные строки, в nano сохраняемся с помощью ctrl+S и выходим с помощью ctrl+X; в vim нажимаем двоеточие что бы ввести команду, и вводим `w` для сохранения и `q` для выхода. Можно написать вместе `:wq`.

Наконнец генерирууем локализации: `locale-gen`.
Ставим системный язык `echo "LANG=en-US.UTF-8" > /etc/locale.conf`.

#### 8. Выбор имени компьютера и хостов.
Заходим в файл `/etc/hostname` и вписываем имя вашей машины, советую запомнить его.
Далее заходим в файл `/etc/hosts` , и не трогая первые две закомментированные строчки вписываем следующее:
```
127.0.0.1    localhost
::1          localhost 
127.0.1.1    [имяпк].localdomain    [имяпк]
```

Сохраняем файл и выходим.

#### 9. Создание пользователя. Настройка прав суперпользователя.
Первым делом стоит ввести пароль суперпользователя (root). Для этого вводим команду `passwd` и меняем пароль рута. 
Создаём нашего пользователя: `useradd -m username` где вместо username вписываете ваше имя пользователя. Задаём пароль `passwd username`. Теперь добавляем пользователя в нужные группы: `usermod -aG wheel,audio,video,optical,storage username`.

Далее нам нужно установить `sudo`, этакое "волшебное слово" в мире линукса, которое можно сравнить с "запуск от имени администратора" в виндовс. `pacman -S sudo`.
Теперь надо поставить текстовый редактор по умолчанию: `EDITOR=nano` и `VISUAL=nano`, вы сами знаете какой редактор вам ставить. 
Внесём кое-какие правки в файл `sudoers` с помощью команды `visudo`. Если будет выдавать ошибку `visudo: no editor found (editor path = /usr/bin/vi)`, есть несколько вариантов решения проблемы:
1. Введите команду `export EDITOR=vim` или поменяйте вим на нано.
2. Он ищет устаревший редактор vi, и надо сделать ссылку на ваш используемый редактор текста. Найдите путь к вашему редактору с помощью команды `whereis`, обычно они находятся в `/usr/bin` или `/usr/share`. Далее привязываете путь к вашему редактору к пути vi `ln -s [путь к вашему редактору] /usr/bin/vi`.
Теперь ищем строку `%wheel` и раскомментируем строчку. Должно выглядеть так:


```bash
## Uncomment to allow members of group wheel to execute any command
%wheel ALL=(ALL:ALL) ALL
```
Не перепутайте со строками ниже NOPASSWD. 

#### 10. Повторная настройка интернета.
До этого мы работали на установочной флешке, где уже был менеджер интернета, но на новой системе его пока нету. Для этого установите его `pacman -S networkmanager`, а после с помощью команды `systemctl enable networkmanager` позвольте ему запускаться при запуске системы.

#### 11. Установка загрузчика (P.S её тут не будет)
Да, про установку загрузчика вроде rEFInd или GRUB тут не будет написано, ибо я сам не один раз всё делал заново, просто из-за карявой установки загрузчика по не тому туториалу. Советую найти подходящий вам туториал, для BIOS или UEFI, советую порыться на арч вики:
[Установка GRUB](https://wiki.archlinux.org/title/GRUB_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#)
[Установка rEFInd](https://wiki.archlinux.org/title/REFInd_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#)

Если после перезагрузки всё работает, поздравляю, у вас получилось установить Арч!

#### 12. Пост-установка
После установки, у вас стоит голая система. Обязательно надо установить драйвера для вашей видеокарты, драйвера для звука и т.д а так же xorg. Далее по вкусу устанавливайте окружение рабочего стола или тайлинговый оконный менеджер. 

